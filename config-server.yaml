---
- name: Configure Windows Host and Install Applications
  hosts: windows
  tasks:
    - name: Ensure Chocolatey is installed
      win_chocolatey_facts:

    - name: Install Chocolatey
      win_command: |
        @"%SystemRoot%\System32\WindowsPowerShell\v1.0\powershell.exe" -NoProfile -InputFormat None -ExecutionPolicy Bypass -Command "iex ((New-Object System.Net.WebClient).DownloadString('https://chocolatey.org/install.ps1'))"
      args:
        creates: C:\ProgramData\chocolatey

    - name: Install Google Chrome
      win_chocolatey:
        name: googlechrome
        state: present

    - name: Install Notepad++
      win_chocolatey:
        name: notepadplusplus
        state: present

    - name: Install Git
      win_chocolatey:
        name: git
        state: present

    - name: Ensure Chocolatey is up to date
      win_chocolatey:
        name: chocolatey
        state: latest
    - name: Install SNMP feature
      win_feature:
        name: SNMP
        state: present

    - name: Install SNMP WMI Provider feature
      win_feature:
        name: SNMP-WMI-Provider
        state: present
